{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\frontend_laundry\\\\src\\\\pages\\\\member.js\";\nimport React from \"react\";\nimport { Modal } from \"bootstrap\";\nimport { event } from \"jquery\";\nimport axios from \"axios\";\nimport Navbar from \"../navbar\";\nimport { baseUrl } from \"../config.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Member extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      members: [{\n        id_member: \"111\",\n        nama: \"John Lucifer\",\n        alamat: \"Jln. Jalan Yuk B2, Malang\",\n        jenis_kelamin: \"Pria\",\n        telepon: \"0821666\"\n      }, {\n        id_member: \"112\",\n        nama: \"Baphomat\",\n        alamat: \"Jln. Jalan 5M KM, Asemjajar\",\n        jenis_kelamin: \"Pria\",\n        telepon: \"0821555\"\n      }, {\n        id_member: \"113\",\n        nama: \"SHitty\",\n        alamat: \"Jln. Jalan ya, Pasuruan\",\n        jenis_kelamin: \"Wanita\",\n        telepon: \"0821777\"\n      }],\n      id_member: \"\",\n      nama: \"\",\n      alamat: \"\",\n      telepon: \"\",\n      jenis_kelamin: \"\",\n      action: \"\",\n      // untuk menyimpan aksi dari tambah atau ubah data\n      role: \"\",\n      visible: true\n    };\n\n    if (!localStorage.getItem(\"token\")) {\n      window.location.href = \"/login\";\n    }\n  }\n\n  tambahData() {\n    //memunculkan mmodal \n    this.modalMember = new Modal(document.getElementById(\"modal-member\"));\n    this.modalMember.show(); //mengosongkan inputannya\n\n    this.setState({\n      nama: \"\",\n      alamat: \"\",\n      telepon: \"\",\n      jenis_kelamin: \"Wanita\",\n      id_member: Math.random(1, 10000000),\n      action: \"tambah\"\n    });\n  }\n\n  simpanData(event) {\n    event.preventDefault(); // mencegah berjalannya aksi default dari form submit\n    //menghilangkan modal\n\n    this.modalMember.hide(); //cek aksi tambah atau ubah \n\n    if (this.state.action === \"tambah\") {\n      let endpoint = `${baseUrl}/member`; //menampung data dari pengguna \n\n      let newMember = {\n        id_member: this.state.id_member,\n        nama: this.state.nama,\n        alamat: this.state.alamat,\n        telepon: this.state.telepon,\n        jenis_kelamin: this.state.jenis_kelamin\n      }; //let temp = this.state.members\n      //temp.push(newMember)\n      //this.setState({ members: temp })\n\n      axios.post(endpoint, newMember).then(response => {\n        window.alert(response.data.message);\n        this.getData();\n      }).catch(error => console.log(error));\n    } else if (this.state.action === \"ubah\") {\n      this.modalMember.hide();\n      let endpoint = `${baseUrl}/member/` + this.state.id_member;\n      let newMember = {\n        id_member: this.state.id_member,\n        nama: this.state.nama,\n        alamat: this.state.alamat,\n        telepon: this.state.telepon,\n        jenis_kelamin: this.state.jenis_kelamin\n      };\n      axios.put(endpoint, newMember).then(response => {\n        window.alert(response.data.message);\n        this.getData();\n      }).catch(error => console.log(error)); // mancari posisis index dari data member berdasarkan id member pada array 'members'\n      // let index = this.state.members.findIndex(\n      //     member => member.id_member === this.state.id_member\n      // )\n      // let temp = this.state.members\n      // temp[index].nama = this.state.nama\n      // temp[index].alamat = this.state.alamat\n      // temp[index].telepon = this.state.telepon\n      // temp[index].jenis_kelamin = this.state.jenis_kelamin\n      // this.setState({ members: temp })\n    }\n  }\n\n  ubahData(id_member) {\n    this.modalMember = new Modal(document.getElementById(\"modal-member\"));\n    this.modalMember.show(); // mancari posisis index dari data member berdasarkan id member pada array 'members'\n\n    let index = this.state.members.findIndex(member => member.id_member === id_member);\n    this.setState({\n      id_member: this.state.members[index].id_member,\n      nama: this.state.members[index].nama,\n      alamat: this.state.members[index].alamat,\n      jenis_kelamin: this.state.members[index].jenis_kelamin,\n      telepon: this.state.members[index].telepon,\n      action: \"ubah\"\n    });\n  }\n\n  hapusData(id_member) {\n    if (window.confirm(\"Apakah anda yakin ingin menghapus data ini?\")) {\n      let endpoint = `${baseUrl}/member/` + id_member;\n      axios.delete(endpoint).then(response => {\n        window.alert(response.data.message);\n        this.getData();\n      }).catch(error => console.log(error)); //mecari posisi index dari data yang aan dihapus\n\n      let temp = this.state.members;\n      let index = temp.findIndex(member => member.id_member === id_member); //menghapus data pada array\n\n      temp.splice(index, 1);\n      this.setState({\n        members: temp\n      });\n    }\n  }\n\n  getData() {\n    let endpoint = `${baseUrl}/member`;\n    axios.get(endpoint).then(response => {\n      this.setState({\n        members: response.data\n      });\n    }).catch(error => console.log(error));\n  }\n\n  componentDidMount() {\n    //fungsi ini dijalankan setelah fungsi render berjalan \n    this.getData();\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    this.setState({\n      role: user.role\n    });\n\n    if (user.role === 'admin' || user.role === 'kasir') {\n      this.setState({\n        visible: true\n      });\n    } else {\n      this;\n    }\n  }\n\n  showAddButton() {\n    if (this.state.role === 'admin' || this.state.role === 'kasir') {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success mx-3\",\n        onClick: () => this.tambahData(),\n        children: \"Tambah Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-dark\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-white\",\n          children: \"List Daftar Member\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group\",\n          children: this.state.members.map(member => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-info\",\n                  children: \"Nama\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 41\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 83\n                }, this), member.nama]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-info\",\n                  children: \"Gender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 41\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 85\n                }, this), member.jenis_kelamin]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning btn-sm mx-3\",\n                  onClick: () => this.ubahData(member.id_member),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger btn-sm mx-3\",\n                  onClick: () => this.hapusData(member.id_member),\n                  children: \"Hapus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-info\",\n                  children: \"Telepon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 41\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 86\n                }, this), member.telepon]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-info\",\n                  children: \"Alamat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 41\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 85\n                }, this), member.alamat]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cd_grip gap-2 d-md-flex justify-content-md-end\",\n        children: this.showAddButton()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        id: \"modal-member\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog modal-md\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-header bg-success\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-white\",\n                children: \"Form Member\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-body\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: ev => this.simpanData(ev),\n                children: [\"Nama\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control mb-2\",\n                  value: this.state.nama,\n                  onChange: ev => this.setState({\n                    nama: ev.target.value\n                  }),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 37\n                }, this), \"Alamat\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control mb-2\",\n                  value: this.state.alamat,\n                  onChange: ev => this.setState({\n                    alamat: ev.target.value\n                  }),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 37\n                }, this), \"Telepon\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control mb-2\",\n                  value: this.state.telepon,\n                  onChange: ev => this.setState({\n                    telepon: ev.target.value\n                  }),\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 37\n                }, this), \"Jenis Kelamin\", /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control mb-2\",\n                  value: this.state.jenis_kelamin,\n                  onChange: ev => this.setState({\n                    jenis_kelamin: ev.target.value\n                  }),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Pria\",\n                    children: \"Pria\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Wanita\",\n                    children: \"Wanita\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success btn-sm\",\n                  type: \"submit\",\n                  children: \"Simpan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Member;","map":{"version":3,"sources":["C:/Users/USER/frontend_laundry/src/pages/member.js"],"names":["React","Modal","event","axios","Navbar","baseUrl","Member","Component","constructor","state","members","id_member","nama","alamat","jenis_kelamin","telepon","action","role","visible","localStorage","getItem","window","location","href","tambahData","modalMember","document","getElementById","show","setState","Math","random","simpanData","preventDefault","hide","endpoint","newMember","post","then","response","alert","data","message","getData","catch","error","console","log","put","ubahData","index","findIndex","member","hapusData","confirm","delete","temp","splice","get","componentDidMount","user","JSON","parse","showAddButton","render","map","ev","target","value"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Modal } from \"bootstrap\";\r\nimport { event } from \"jquery\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"../navbar\"\r\nimport { baseUrl } from \"../config.js\"\r\n\r\nclass Member extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            members: [\r\n                {\r\n                    id_member: \"111\", nama: \"John Lucifer\",\r\n                    alamat: \"Jln. Jalan Yuk B2, Malang\",\r\n                    jenis_kelamin: \"Pria\", telepon: \"0821666\"\r\n                },\r\n                {\r\n                    id_member: \"112\", nama: \"Baphomat\",\r\n                    alamat: \"Jln. Jalan 5M KM, Asemjajar\",\r\n                    jenis_kelamin: \"Pria\", telepon: \"0821555\"\r\n                },\r\n                {\r\n                    id_member: \"113\", nama: \"SHitty\",\r\n                    alamat: \"Jln. Jalan ya, Pasuruan\",\r\n                    jenis_kelamin: \"Wanita\", telepon: \"0821777\"\r\n                }\r\n            ],\r\n            id_member: \"\",\r\n            nama: \"\",\r\n            alamat: \"\",\r\n            telepon: \"\",\r\n            jenis_kelamin: \"\",\r\n            action: \"\", // untuk menyimpan aksi dari tambah atau ubah data\r\n            role: \"\",\r\n            visible: true,\r\n        }\r\n        \r\n        if (!localStorage.getItem(\"token\")) {\r\n            window .location.href = \"/login\"\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    tambahData() {\r\n        //memunculkan mmodal \r\n        this.modalMember = new Modal(document.getElementById(\"modal-member\"))\r\n        this.modalMember.show()\r\n\r\n        //mengosongkan inputannya\r\n        this.setState({\r\n            nama: \"\", alamat: \"\", telepon: \"\", jenis_kelamin: \"Wanita\",\r\n            id_member: Math.random(1, 10000000), action: \"tambah\"\r\n        })\r\n    }\r\n\r\n    simpanData(event) {\r\n        event.preventDefault()\r\n        // mencegah berjalannya aksi default dari form submit\r\n\r\n        //menghilangkan modal\r\n        this.modalMember.hide()\r\n\r\n        //cek aksi tambah atau ubah \r\n        if (this.state.action === \"tambah\") {\r\n            let endpoint = `${baseUrl}/member`\r\n            //menampung data dari pengguna \r\n            let newMember = {\r\n                id_member: this.state.id_member,\r\n                nama: this.state.nama,\r\n                alamat: this.state.alamat,\r\n                telepon: this.state.telepon,\r\n                jenis_kelamin: this.state.jenis_kelamin\r\n            }\r\n\r\n            //let temp = this.state.members\r\n            //temp.push(newMember)\r\n\r\n            //this.setState({ members: temp })\r\n            axios.post(endpoint, newMember)\r\n                .then(response => {\r\n                    window.alert(response.data.message)\r\n                    this.getData()\r\n                })\r\n                .catch(error => console.log(error))\r\n\r\n        } else if (this.state.action === \"ubah\") {\r\n            this.modalMember.hide()\r\n            let endpoint = `${baseUrl}/member/` + \r\n                this.state.id_member\r\n\r\n            let newMember = {\r\n                id_member: this.state.id_member,\r\n                nama: this.state.nama,\r\n                alamat: this.state.alamat,\r\n                telepon: this.state.telepon,\r\n                jenis_kelamin: this.state.jenis_kelamin\r\n            }\r\n            axios.put(endpoint, newMember)\r\n            .then(response => {\r\n                window.alert(response.data.message)\r\n                this.getData()\r\n            })\r\n            .catch(error => console.log(error))\r\n\r\n            // mancari posisis index dari data member berdasarkan id member pada array 'members'\r\n            // let index = this.state.members.findIndex(\r\n            //     member => member.id_member === this.state.id_member\r\n            // )\r\n\r\n            // let temp = this.state.members\r\n            // temp[index].nama = this.state.nama\r\n            // temp[index].alamat = this.state.alamat\r\n            // temp[index].telepon = this.state.telepon\r\n            // temp[index].jenis_kelamin = this.state.jenis_kelamin\r\n\r\n            // this.setState({ members: temp })\r\n\r\n        }\r\n    }\r\n\r\n    ubahData(id_member) {\r\n        this.modalMember = new Modal(document.getElementById(\"modal-member\"))\r\n        this.modalMember.show()\r\n\r\n        // mancari posisis index dari data member berdasarkan id member pada array 'members'\r\n        let index = this.state.members.findIndex(\r\n            member => member.id_member === id_member\r\n        )\r\n\r\n        this.setState({\r\n            id_member: this.state.members[index].id_member,\r\n            nama: this.state.members[index].nama,\r\n            alamat: this.state.members[index].alamat,\r\n            jenis_kelamin: this.state.members[index].jenis_kelamin,\r\n            telepon: this.state.members[index].telepon,\r\n            action: \"ubah\"\r\n\r\n        })\r\n    }\r\n    hapusData(id_member) {\r\n        if(window.confirm(\"Apakah anda yakin ingin menghapus data ini?\")){\r\n            let endpoint = `${baseUrl}/member/` +\r\n                id_member\r\n\r\n            axios.delete(endpoint)\r\n            .then(response => {\r\n                window.alert(response.data.message)\r\n                this.getData()\r\n            })\r\n            .catch(error => console.log(error))\r\n            \r\n            //mecari posisi index dari data yang aan dihapus\r\n            let temp = this.state.members\r\n            let index = temp.findIndex(\r\n                member => member.id_member === id_member\r\n            )\r\n\r\n            //menghapus data pada array\r\n            temp.splice(index, 1)\r\n\r\n            this.setState({ members: temp })\r\n        }\r\n    }\r\n    getData() {\r\n        let endpoint = `${baseUrl}/member`\r\n        axios.get(endpoint)\r\n            .then(response => {\r\n                this.setState({ members: response.data })\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    componentDidMount() {\r\n        //fungsi ini dijalankan setelah fungsi render berjalan \r\n        this.getData()\r\n        let user = JSON.parse(localStorage.getItem(\"user\"))\r\n        this.setState({\r\n            role: user.role\r\n        })\r\n        if (user.role ==='admin' || user.role ==='kasir') {\r\n            this.setState({\r\n                visible: true\r\n            })\r\n        } else {\r\n            this\r\n        }\r\n    }\r\n\r\n    showAddButton(){\r\n        if(this.state.role === 'admin' || this.state.role === 'kasir'){\r\n            return (\r\n                <button className=\"btn btn-success mx-3\"\r\n                onClick={() => this.tambahData()}>Tambah Data</button>\r\n            )\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"card\">\r\n                <div className=\"card-header bg-dark\">\r\n                    <h4 className=\"text-white\">\r\n                        List Daftar Member\r\n                    </h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <ul className=\"list-group\">\r\n                        {this.state.members.map(member => (\r\n                            <li className=\"list-group-item\">\r\n                                <div className=\"row\">\r\n                                    {/* bagian untuk nama */}\r\n                                    <div className=\"col-lg-5\">\r\n                                        <small className=\"text-info\">Nama</small> <br />\r\n                                        {member.nama}\r\n                                    </div>\r\n\r\n                                    {/* bagian untuk gender */}\r\n                                    <div className=\"col-lg-3\">\r\n                                        <small className=\"text-info\">Gender</small> <br />\r\n                                        {member.jenis_kelamin}\r\n                                    </div>\r\n\r\n                                    <div className=\"col-lg-2\">\r\n                                        <button className=\"btn btn-warning btn-sm mx-3\"\r\n                                            onClick={() => this.ubahData(member.id_member)}>\r\n                                            Edit\r\n                                        </button>\r\n                                        <button className=\"btn btn-danger btn-sm mx-3\"\r\n                                            onClick={() => this.hapusData(member.id_member)}>\r\n                                            Hapus\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* bagian untuk Telepon */}\r\n                                    <div className=\"col-lg-4\">\r\n                                        <small className=\"text-info\">Telepon</small> <br />\r\n                                        {member.telepon}\r\n                                    </div>\r\n\r\n\r\n\r\n                                    {/* bagian untuk alamat */}\r\n                                    <div className=\"col-lg-12\">\r\n                                        <small className=\"text-info\">Alamat</small> <br />\r\n                                        {member.alamat}\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"cd_grip gap-2 d-md-flex justify-content-md-end\">\r\n                   {this.showAddButton()}\r\n                </div>\r\n\r\n                {/* form modal member */}\r\n                <div className=\"modal\" id=\"modal-member\">\r\n                    <div className=\"modal-dialog modal-md\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-header bg-success\">\r\n                                <h4 className=\"text-white\">\r\n                                    Form Member\r\n                                </h4>\r\n                            </div>\r\n\r\n                            <div className=\"modal-body\">\r\n                                <form onSubmit={ev => this.simpanData(ev)}>\r\n                                    Nama\r\n                                    <input type=\"text\" className=\"form-control mb-2\"\r\n                                        value={this.state.nama}\r\n                                        onChange={ev => this.setState({ nama: ev.target.value })}\r\n                                        required />\r\n\r\n                                    Alamat\r\n                                    <input type=\"text\" className=\"form-control mb-2\"\r\n                                        value={this.state.alamat}\r\n                                        onChange={ev => this.setState({ alamat: ev.target.value })}\r\n                                        required />\r\n\r\n                                    Telepon\r\n                                    <input type=\"text\" className=\"form-control mb-2\"\r\n                                        value={this.state.telepon}\r\n                                        onChange={ev => this.setState({ telepon: ev.target.value })}\r\n                                        required />\r\n\r\n                                    Jenis Kelamin\r\n                                    <select className=\"form-control mb-2\"\r\n                                        value={this.state.jenis_kelamin}\r\n                                        onChange={ev => this.setState({ jenis_kelamin: ev.target.value })}>\r\n                                        <option value=\"Pria\">Pria</option>\r\n                                        <option value=\"Wanita\">Wanita</option>\r\n                                    </select>\r\n\r\n\r\n                                    <button className=\"btn btn-success btn-sm\"\r\n                                        type=\"submit\">\r\n                                        Simpan\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Member"]},"metadata":{},"sourceType":"module"}